language: php
before_script:
- if [ -n "$GIT_HUB_TOKEN" ]; then composer config -g github-oauth.github.com "$GIT_HUB_TOKEN";
  fi;
- if [ "$dependencies" = "lowest" ]; then composer update --prefer-lowest --prefer-stable
  -n; fi;
script:
- make test
after_success:
- bash <(curl -s https://codecov.io/bash)
php:
- 5.6
- 7.0
- 7.1
- 7.2
- 7.3
- 7.4
env:
- dependencies=lowest
- dependencies=highest
notifications:
  slack:
    if: branch = main
    on_pull_requests: false
    on_success: never
    on_failure: change
    rooms:
      secure: oxdUtmpFnerZFoRpiNQ9ONDSCQKsfD3F79pQ9L2F7PQbciBXhjwp7KHGYU+gSQ4XIJ7NV0TEaW+mSGJlctV2lwNpCNufu1PcqqlzpEu8Y8g0Y8D/brnFIPv9fyaheZM/T9K1TKpL6uggjqShjOxfcrzSO5/xcT/4x83zvzyVDj0=
